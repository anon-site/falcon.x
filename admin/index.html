<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Falcon X</title>
    <link rel="icon" type="image/png" href="../images/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/admin.css">
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="nav-left">
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="logo">
                <i class="fas fa-dove"></i>
                <span>Falcon X Admin</span>
            </div>
        </div>
        <div class="nav-right">
            <div class="unsaved-indicator" id="unsavedIndicator" style="display: none;">
                <i class="fas fa-exclamation-circle"></i>
                <span>Unsaved Changes</span>
            </div>
            <button class="save-btn" id="saveBtn" style="display: none;">
                <i class="fas fa-save"></i>
                Save Changes
            </button>
            <button class="nav-icon-btn" onclick="window.open('/', '_blank')">
                <i class="fas fa-external-link-alt"></i>
            </button>
            <button class="nav-icon-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside class="admin-sidebar" id="adminSidebar">
        <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active" data-section="dashboard">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
            
            <div class="nav-group">
                <div class="nav-group-title">Content Management</div>
                
                <a href="#windows-programs" class="nav-item" data-section="windows-programs">
                    <i class="fab fa-windows"></i>
                    <span>Windows Programs</span>
                </a>
                
                <a href="#windows-games" class="nav-item" data-section="windows-games">
                    <i class="fas fa-gamepad"></i>
                    <span>Windows Games</span>
                </a>
                
                <a href="#android-apps" class="nav-item" data-section="android-apps">
                    <i class="fab fa-android"></i>
                    <span>Android Apps</span>
                </a>
                
                <a href="#android-games" class="nav-item" data-section="android-games">
                    <i class="fas fa-mobile-alt"></i>
                    <span>Android Games</span>
                </a>
                
                <a href="#phone-tools" class="nav-item" data-section="phone-tools">
                    <i class="fas fa-tools"></i>
                    <span>Phone Tools</span>
                </a>
                
                <a href="#frp-apps" class="nav-item" data-section="frp-apps">
                    <i class="fas fa-unlock-alt"></i>
                    <span>FRP Apps</span>
                </a>
            </div>
            
            <div class="nav-group">
                <div class="nav-group-title">Settings</div>
                
                <a href="#categories" class="nav-item" data-section="categories">
                    <i class="fas fa-tags"></i>
                    <span>Manage Categories</span>
                </a>
                
                <a href="#github-settings" class="nav-item" data-section="github-settings">
                    <i class="fab fa-github"></i>
                    <span>GitHub Settings</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="admin-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="admin-section active">
            <div class="section-header">
                <h1>Dashboard</h1>
                <p>Overview of your content statistics</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon windows">
                        <i class="fab fa-windows"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Windows Programs</span>
                        <span class="stat-value" id="statsWindowsPrograms">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon games">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Windows Games</span>
                        <span class="stat-value" id="statsWindowsGames">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon android">
                        <i class="fab fa-android"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Android Apps</span>
                        <span class="stat-value" id="statsAndroidApps">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon games">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Android Games</span>
                        <span class="stat-value" id="statsAndroidGames">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon tools">
                        <i class="fas fa-tools"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Phone Tools</span>
                        <span class="stat-value" id="statsPhoneTools">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon frp">
                        <i class="fas fa-unlock-alt"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">FRP Apps</span>
                        <span class="stat-value" id="statsFrpApps">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon categories">
                        <i class="fas fa-tags"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Total Categories</span>
                        <span class="stat-value" id="statsTotalCategories">0</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon total">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-label">Total Items</span>
                    <span class="stat-value" id="statsTotalItems">0</span>
                </div>
            </div>
        </div>

        <!-- Data Management Section -->
        <div class="section-header" style="margin-top: 3rem;">
            <div>
                <h2 style="font-size: 1.5rem; margin-bottom: 0.5rem;">Data Management</h2>
                <p>Export or import your data for backup and migration</p>
            </div>
        </div>

        <div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
            <div class="stat-card" style="flex-direction: column; align-items: stretch; padding: 2rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                    <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                        <i class="fas fa-file-export"></i>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.125rem;">Export Data</h3>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.875rem;">Download all your data as JSON</p>
                    </div>
                </div>
                <button class="btn btn-success" style="width: 100%;" onclick="exportData()">
                    <i class="fas fa-download"></i>
                    Export All Data
                </button>
            </div>

            <div class="stat-card" style="flex-direction: column; align-items: stretch; padding: 2rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                    <div class="stat-icon" style="background: rgba(99, 102, 241, 0.1); color: #6366f1;">
                        <i class="fas fa-file-import"></i>
                    </div>
                    <div>
                        <h3 style="margin: 0; font-size: 1.125rem;">Import Data</h3>
                        <p style="margin: 0; color: var(--text-secondary); font-size: 0.875rem;">Upload JSON file to restore data</p>
                    </div>
                </div>
                <input type="file" id="importFileInput" accept=".json" style="display: none;" onchange="importData(event)">
                <button class="btn btn-primary" style="width: 100%;" onclick="document.getElementById('importFileInput').click()">
                    <i class="fas fa-upload"></i>
                    Import Data
                </button>
            </div>
        </div>
    </section>

        <!-- Content Management Sections -->
        <section id="content-section" class="admin-section">
            <div class="section-header">
                <h1 id="sectionTitle">Manage Items</h1>
                <button class="btn btn-primary" id="addNewBtn">
                    <i class="fas fa-plus"></i>
                    Add New
                </button>
            </div>

            <div class="items-table-container">
                <table class="items-table" id="itemsTable">
                    <thead>
                        <tr>
                            <th>Icon</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Version</th>
                            <th>Size</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="itemsTableBody">
                        <!-- Dynamic content -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Categories Management Section -->
        <section id="categories" class="admin-section">
            <div class="section-header">
                <h1>Manage Categories</h1>
                <button class="btn btn-primary" id="addCategoryBtn">
                    <i class="fas fa-plus"></i>
                    Add Category
                </button>
            </div>

            <div class="categories-grid" id="categoriesGrid">
                <!-- Dynamic content -->
            </div>
        </section>

        <!-- GitHub Settings Section -->
        <section id="github-settings" class="admin-section">
            <div class="section-header">
                <h1>GitHub Settings</h1>
                <p>Configure GitHub integration for data backup</p>
            </div>

            <div class="settings-container">
                <div class="settings-card">
                    <div class="form-group">
                        <label for="githubToken">GitHub Personal Access Token</label>
                        <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxxx">
                        <small>Token needs 'repo' permissions</small>
                    </div>

                    <div class="form-group">
                        <label for="githubUsername">GitHub Username</label>
                        <input type="text" id="githubUsername" placeholder="your-username" readonly>
                    </div>

                    <div class="form-group">
                        <label for="githubRepo">Repository Name</label>
                        <input type="text" id="githubRepo" placeholder="falcon-x-data">
                    </div>

                    <button class="btn btn-primary" id="testGithubBtn">
                        <i class="fab fa-github"></i>
                        Test Connection
                    </button>

                    <button class="btn btn-success" id="openRepoBtn" style="display: none;">
                        <i class="fas fa-external-link-alt"></i>
                        Open Repository
                    </button>

                    <div class="github-status" id="githubStatus"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Add/Edit Item Modal -->
    <div class="modal" id="itemModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Item</h2>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="itemForm">
                    <input type="hidden" id="itemId">
                    <input type="hidden" id="itemType">

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemName">Name *</label>
                            <input type="text" id="itemName" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemCategory">Category *</label>
                            <select id="itemCategory" required>
                                <option value="">Select Category</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="itemVersion">Version</label>
                            <input type="text" id="itemVersion" placeholder="1.0.0">
                        </div>

                        <div class="form-group">
                            <label for="itemSize">Size</label>
                            <input type="text" id="itemSize" placeholder="50 MB">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemShortDesc">Short Description</label>
                            <input type="text" id="itemShortDesc" placeholder="Brief description...">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemFullDesc">Full Description</label>
                            <textarea id="itemFullDesc" rows="4" placeholder="Detailed description..."></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemIconUrl">Icon URL</label>
                            <input type="url" id="itemIconUrl" placeholder="https://example.com/icon.png">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemScreenshots">Screenshots URLs (one per line)</label>
                            <textarea id="itemScreenshots" rows="3" placeholder="https://example.com/screenshot1.png&#10;https://example.com/screenshot2.png&#10;https://example.com/screenshot3.png"></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemFeatures">Features (one per line)</label>
                            <textarea id="itemFeatures" rows="4" placeholder="Feature 1&#10;Feature 2&#10;Feature 3"></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemRequirements">System Requirements (one per line)</label>
                            <textarea id="itemRequirements" rows="4" placeholder="Windows 10 or higher&#10;4 GB RAM&#10;2 GB free disk space&#10;Intel Core i3 or better"></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemOriginalLink">Original Download Link</label>
                            <input type="url" id="itemOriginalLink" placeholder="https://...">
                        </div>

                        <div class="form-group">
                            <label for="itemModifiedLink">Modified Version Link</label>
                            <input type="url" id="itemModifiedLink" placeholder="https://...">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemWebsite">Official Website</label>
                            <input type="url" id="itemWebsite" placeholder="https://...">
                        </div>

                        <div class="form-group">
                            <label for="itemStatus">Status</label>
                            <select id="itemStatus">
                                <option value="original">Original</option>
                                <option value="modified">Modified</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="itemNote">Note</label>
                            <textarea id="itemNote" rows="2" placeholder="Important note..."></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Note Color</label>
                            <div class="color-picker">
                                <label class="color-option">
                                    <input type="radio" name="noteColor" value="green" checked>
                                    <span class="color-box green">
                                        <i class="fas fa-check"></i>
                                    </span>
                                    <span>Green</span>
                                </label>
                                <label class="color-option">
                                    <input type="radio" name="noteColor" value="orange">
                                    <span class="color-box orange">
                                        <i class="fas fa-check"></i>
                                    </span>
                                    <span>Orange</span>
                                </label>
                                <label class="color-option">
                                    <input type="radio" name="noteColor" value="red">
                                    <span class="color-box red">
                                        <i class="fas fa-check"></i>
                                    </span>
                                    <span>Red</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Save Item
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="categoryModalTitle">Add Category</h2>
                <button class="modal-close" onclick="closeCategoryModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="categoryForm">
                    <input type="hidden" id="categoryId">
                    <input type="hidden" id="categoryType">

                    <div class="form-group">
                        <label for="categoryName">Category Name *</label>
                        <input type="text" id="categoryName" required>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeCategoryModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Save Category
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <script src="../js/admin.js"></script>
</body>
</html>
